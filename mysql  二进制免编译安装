mysql 的安装

下载mysql的安装包
wget https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.28-linux-glibc2.12-x86_64.tar.gz
1 新建组
groupadd mysql
2 新建用户
useradd -r -g mysql mysql
tar zxvf mysql-5.7.28-linux-glibc2.12-x86_64.tar.gz 
mv mysql-5.7.28-linux-glibc2.12-x86_64 /usr/local/mysql
进入mysql根目录
cd /usr/local/mysql/
修改拥有者为mysql用户
chown -R mysql:mysql ./

cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld
vi /etc/init.d/mysqld
 修改的内容
basedir=/usr/local/mysql
datadir=/usr/local/mysql/data

mv my.cnf my.cnf_20191201.bak

vim /etc/my.cnf
### 添加
[client]
port = 3306
default-character-set=utf8

[mysqld]
# 一般配置选项
basedir = /usr/local/mysql
datadir = /usr/local/mysql/data
port = 3306
character-set-server=utf8
default_storage_engine = InnoDB

sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

cd /usr/local/mysql/bin/
./mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data
service mysql start
ln -s /usr/local/mysql/bin/mysql /usr/bin/mysql
放行端口
firewall-cmd --zone=public --add-port=3306/tcp --permanent
firewall-cmd --reload

查看自启服务列表
chkconfig --list
添加mysql服务到自启服务
chkconfig --add mysqld
设置自启
chkconfig mysqld on

vi /etc/profile
 修改的内容
# mysql environment
export MYSQL_HOME=/usr/local/mysql
export PATH=$PATH:$MYSQL_HOME/bin
 更新环境变量
source /etc/profile
